# ULog

中文说明[在此](README.md)。

This module generates a self-describing binary log file that conforms to the log format requirements of PX4.

## Usage

### 1、Dfine Types

Before using ULog, you need to define the types of data to be saved in the log in the `Topic/Topic.xlse` file, following the specific rules below:

- Each sheet in the Excel file represents a data type, corresponding to a C language structure type, and the sheet name corresponds to the structure name;
- Each row in the sheet represents a member of the structure;
- The first column defines the data type of the member, the second column defines the array size of the member, and the third column defines the name of the member.

### 2、Generate Types and Functions

The types and functions required for log storage can be generated in two ways:

- Run the `Generate.m` script in MATLAB, which will generate the `Topic.h` and `Topic.c` files;
- Manually write the content related to the `ULOG_VARIABLE_ENTER_T` structure required by the `ULogInit` function；

### 3、Save Data

Save data to the log via `ULogUpdateID` or `ULogUpdateName`, with one data type saved per call.

## Sub-directories Overview
```
.
├── core
│     ├── inc
│     │    ├── ulog.h             # Public API header file
│     │    └── ulog_internal.h    # Internal header file
│     └── src
│          └── ulog.c             # Core implementation code
├── Tool
│     ├── flightplot.jar          # Log file parsing tool
│     ├── Generate.py             # python script that generates the types and functions required for log storage based on the data types defined by the user in Topic/Topic.xlse
│     ├── Generate.m              # MATLAB script that generates the types and functions required for log storage based on the data types defined by the user in Topic/Topic.xlse
│     ├── Parse.m                 # MATLAB script that parses log files and generates MATLAB data based on the data types defined by the user in Topic/Topic.xlse
│     └── Function                # Utility functions required by the two MATLAB scripts above
├── Topic
│     ├── Topic.xlse              # File that defines the types of data to be saved in the log
│     ├── Topic.h                 # Type definitions generated by Generate.m
│     └── Topic.c                 # Function definitions generated by Generate.m
├── _Doc
│     └── ULog.pdf                # ULog Format Definition
└── _example                      # Example projects
```